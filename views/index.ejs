<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GOAT-PDF - Advanced PDF Tools</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #2d3436;
      --secondary-color: #636e72;
      --accent-color: #00b894;
      --background-color: #f5f6fa;
      --card-background: #ffffff;
      --text-color: #2d3436;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }

    .navbar {
      background-color: var(--card-background);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 1rem 0;
    }

    .navbar-brand {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
    }

    .navbar-brand i {
      color: var(--accent-color);
    }

    .nav-link {
      color: var(--secondary-color);
      font-weight: 500;
      padding: 0.5rem 1rem;
      transition: all 0.3s ease;
    }

    .nav-link:hover {
      color: var(--accent-color);
    }

    .nav-link.active {
      color: var(--accent-color);
      border-bottom: 2px solid var(--accent-color);
    }

    .hero {
      background: linear-gradient(135deg, var(--card-background) 0%, var(--background-color) 100%);
      padding: 4rem 0;
    }

    .hero h1 {
      color: var(--primary-color);
      font-weight: 800;
      margin-bottom: 1.5rem;
    }

    .hero p {
      color: var(--secondary-color);
      font-size: 1.2rem;
      margin-bottom: 2rem;
    }

    .btn-primary {
      background-color: var(--accent-color);
      border-color: var(--accent-color);
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      background-color: #00a884;
      border-color: #00a884;
      transform: translateY(-2px);
    }

    .feature-card {
      background: var(--card-background);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    }

    .feature-icon {
      font-size: 2.5rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
    }

    .section-title {
      color: var(--primary-color);
      font-weight: 700;
      margin-bottom: 3rem;
    }

    .tools {
      background-color: var(--background-color);
    }

    .tool-card {
      background: var(--card-background);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      height: 100%;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }

    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    }

    .tool-icon {
      font-size: 2.5rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
    }

    .tool-card h3 {
      color: var(--primary-color);
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .tool-card p {
      color: var(--secondary-color);
      margin-bottom: 1.5rem;
    }

    .tool-card .btn {
      width: 100%;
    }

    .tool-card form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1rem;
    }

    .tool-card input[type="file"] {
      border: 2px dashed var(--accent-color);
      padding: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .tool-card input[type="file"]:hover {
      background-color: rgba(0, 184, 148, 0.1);
    }

    .tool-card input[type="text"],
    .tool-card input[type="number"] {
      padding: 0.75rem;
      border: 1px solid var(--secondary-color);
      border-radius: 8px;
      font-size: 1rem;
    }

    .tool-card input[type="text"]:focus,
    .tool-card input[type="number"]:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 0 2px rgba(0, 184, 148, 0.2);
    }

    .tool-card button {
      margin-top: 0.5rem;
    }

    .tool-card a[download] {
      display: inline-block;
      margin-top: 1rem;
      color: var(--accent-color);
      text-decoration: none;
      font-weight: 500;
    }

    .tool-card a[download]:hover {
      text-decoration: underline;
    }

    /* PDF to Word specific styles */
    .pdf-to-word-section {
      background: linear-gradient(135deg, var(--card-background) 0%, var(--background-color) 100%);
      padding: 3rem 0;
      margin: 2rem 0;
    }

    .pdf-to-word-card {
      background: var(--card-background);
      border-radius: 16px;
      padding: 2.5rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .pdf-to-word-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.15);
    }

    .drop-zone {
      border: 3px dashed var(--accent-color);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: rgba(0, 184, 148, 0.05);
    }

    .drop-zone:hover {
      background: rgba(0, 184, 148, 0.1);
    }

    .drop-zone i {
      font-size: 3rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
    }

    .progress {
      height: 8px;
      border-radius: 4px;
      margin: 1rem 0;
      display: none;
    }

    .progress-bar {
      background-color: var(--accent-color);
      transition: width 0.3s ease;
    }

    .download-options {
      display: none;
      margin-top: 1.5rem;
    }

    .download-options.show {
      display: block;
    }

    .download-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .download-btn i {
      font-size: 1.2rem;
    }

    .download-btn:hover {
      transform: translateY(-2px);
    }
  </style>
</head>
<body>
  <header class="header">
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="/">
          <i class="fas fa-file-pdf"></i> GOAT-PDF
        </a>
        <div class="ms-auto">
          <% if (!user) { %>
            <a href="/login" class="btn btn-outline-primary me-2">Login</a>
            <a href="/register" class="btn btn-outline-success">Register</a>
          <% } else { %>
            <span class="me-2">Welcome, <%= user.first_name || user.email %></span>
            <a href="/logout" class="btn btn-outline-danger">Logout</a>
          <% } %>
        </div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="/#merge"><i class="fas fa-object-group"></i> Merge</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#split"><i class="fas fa-cut"></i> Split</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#compress"><i class="fas fa-compress-arrows-alt"></i> Compress</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#toword"><i class="fas fa-file-word"></i> To Word</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#toimage"><i class="fas fa-images"></i> To Image</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#watermark"><i class="fas fa-stamp"></i> Watermark</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#rotate"><i class="fas fa-redo"></i> Rotate</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/#delete"><i class="fas fa-trash-alt"></i> Delete Pages</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    
    <div class="hero">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <h1 class="display-4">Your Ultimate PDF Solution</h1>
            <p class="lead">Transform, manage, and optimize your PDF files with our powerful suite of tools.</p>
            <div class="hero-buttons">
              <a href="#tools" class="btn btn-primary">Get Started</a>
              <a href="#features" class="btn btn-outline-secondary">Learn More</a>
            </div>
          </div>
          <div class="col-lg-6">
            <img src="https://images.pexels.com/photos/6694543/pexels-photo-6694543.jpeg" alt="PDF Tools" class="img-fluid hero-image">
          </div>
        </div>
      </div>
    </div>
  </header>

  <section id="features" class="features">
    <div class="container">
      <h2 class="section-title text-center">Key Features</h2>
      <div class="row">
        <div class="col-md-3">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-object-group"></i>
            </div>
            <h3>Merge & Split</h3>
            <p>Combine multiple PDFs or extract specific pages.</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-file-word"></i>
            </div>
            <h3>Convert</h3>
            <p>Convert PDFs to Word or Images with OCR support.</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-stamp"></i>
            </div>
            <h3>Watermark</h3>
            <p>Add custom text or image watermarks to your PDFs.</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-compress-arrows-alt"></i>
            </div>
            <h3>Optimize</h3>
            <p>Compress PDFs and manage pages efficiently.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="tools" class="tools py-5">
    <div class="container">
      <h2 class="section-title text-center">PDF Tools</h2>
      <div class="row g-4">
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/merge',
            fileInputName: 'pdfs',
            label: 'PDFs',
            buttonText: 'Merge PDFs',
            accept: '.pdf',
            multiple: true
          }) %>
        </div>
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/split',
            fileInputName: 'pdf',
            label: 'PDF',
            buttonText: 'Split PDF',
            accept: '.pdf',
            multiple: false,
            extraFields: `<input type="text" name="pages" class="form-control mb-2" placeholder="Enter page numbers (e.g., 1,2,3)" required>`
          }) %>
        </div>
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/compress',
            fileInputName: 'pdf',
            label: 'PDF',
            buttonText: 'Compress PDF',
            accept: '.pdf',
            multiple: false
          }) %>
        </div>
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/convert-to-image',
            fileInputName: 'pdfFile',
            label: 'PDF',
            buttonText: 'Convert to Image',
            accept: '.pdf',
            multiple: false
          }) %>
        </div>
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/watermark',
            fileInputName: 'pdf',
            label: 'PDF',
            buttonText: 'Add Watermark',
            accept: '.pdf',
            multiple: false,
            extraFields: `<input type="text" name="watermarkText" class="form-control mb-2" placeholder="Enter watermark text" required>`
          }) %>
        </div>
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/rotate',
            fileInputName: 'pdf',
            label: 'PDF',
            buttonText: 'Rotate PDF',
            accept: '.pdf',
            multiple: false,
            extraFields: `<input type="number" name="angle" class="form-control mb-2" placeholder="Enter angle (e.g., 90)" required>`
          }) %>
        </div>
        <div class="col-md-6 col-lg-4">
          <%- include('partials/conversionCard', {
            action: '/delete-pages',
            fileInputName: 'pdf',
            label: 'PDF',
            buttonText: 'Delete Pages',
            accept: '.pdf',
            multiple: false,
            extraFields: `<input type="text" name="pages" class="form-control mb-2" placeholder="Enter page numbers to delete (e.g., 1,2,3)" required>`
          }) %>
        </div>
      </div>
    </div>
  </section>

  <section id="plans" class="container my-5">
    <h2 class="section-title text-center">Choose a Subscription Plan</h2>
    <form action="/subscribe" method="POST" class="d-flex justify-content-center">
      <select name="plan_id" class="form-select w-auto me-2">
        <option value="1">Free</option>
        <option value="2">Basic</option>
        <option value="3">Premium</option>
        <option value="4">Enterprise</option>
      </select>
      <button type="submit" class="btn btn-primary">Subscribe</button>
    </form>
  </section>

  <section id="dashboard" class="container my-5">
    <h2 class="section-title text-center">Your Conversion History</h2>
    <div id="conversion-history">
      <!-- Conversion history will be rendered here -->
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h3>PDF Tools</h3>
          <p>Your one-stop solution for all PDF manipulation needs.</p>
        </div>
        <div class="col-md-3">
          <h4>Tools</h4>
          <ul class="footer-links">
            <li><a href="/#merge">Merge PDFs</a></li>
            <li><a href="/#split">Split PDF</a></li>
            <li><a href="/#compress">Compress PDF</a></li>
          </ul>
        </div>
        <div class="col-md-3">
          <h4>Quick Links</h4>
          <ul class="footer-links">
            <li><a href="/#features">Features</a></li>
            <li><a href="/#tools">Tools</a></li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2025 PDF Tools. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // PDF to Word conversion handling
    const dropZone = document.getElementById('dropZone');
    const pdfFile = document.getElementById('pdfFile');
    const pdfToWordForm = document.getElementById('pdfToWordForm');
    const progress = document.querySelector('.progress');
    const progressBar = document.querySelector('.progress-bar');
    const convertBtn = document.getElementById('convertBtn');
    const downloadOptions = document.getElementById('downloadOptions');
    const downloadBtn = document.getElementById('downloadBtn');

    // Drag and drop handling
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
      dropZone.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, unhighlight, false);
    });

    function highlight(e) {
      dropZone.classList.add('bg-light');
    }

    function unhighlight(e) {
      dropZone.classList.remove('bg-light');
    }

    dropZone.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      pdfFile.files = files;
      updateFileName(files[0].name);
    }

    pdfFile.addEventListener('change', function() {
      if (this.files.length > 0) {
        updateFileName(this.files[0].name);
      }
    });

    function updateFileName(name) {
      const fileName = document.createElement('p');
      fileName.className = 'mt-2 mb-0';
      fileName.innerHTML = `<strong>Selected file:</strong> ${name}`;
      dropZone.appendChild(fileName);
    }

    pdfToWordForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      progress.style.display = 'block';
      convertBtn.disabled = true;
      
      try {
        const response = await fetch('/to-word', {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
          progressBar.style.width = '100%';
          downloadOptions.classList.add('show');
          downloadBtn.href = `/download/${result.file.split('/').pop()}`;
        } else {
          throw new Error(result.error);
        }
      } catch (error) {
        alert('Conversion failed: ' + error.message);
      } finally {
        convertBtn.disabled = false;
      }
    });

    function convertAnother() {
      pdfToWordForm.reset();
      progress.style.display = 'none';
      progressBar.style.width = '0%';
      downloadOptions.classList.remove('show');
      const fileName = dropZone.querySelector('p');
      if (fileName) fileName.remove();
    }
  </script>
</body>
</html>